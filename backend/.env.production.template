# ============================================================================
# ComSpace — Production Environment Variables
# ============================================================================
# Copy this file to .env and fill in ALL required values before deploying.
# Lines marked [REQUIRED] must be set. Lines marked [OPTIONAL] have defaults.
# ============================================================================

# ── Server ───────────────────────────────────────────────────────────────────
NODE_ENV=production                         # [REQUIRED] Must be "production"
PORT=5000                                   # [OPTIONAL] Backend port (default: 5000)
TRUST_PROXY=1                               # [OPTIONAL] Set to number of proxies in front (nginx=1, CDN+nginx=2)

# ── Database ─────────────────────────────────────────────────────────────────
MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/comspace?retryWrites=true&w=majority  # [REQUIRED]
REDIS_URL=redis://:password@redis-host:6379                                                       # [REQUIRED]

# ── Authentication ───────────────────────────────────────────────────────────
# Generate strong secrets: openssl rand -base64 64
JWT_SECRET=                                 # [REQUIRED] Min 64 chars
JWT_EXPIRE=15m                              # [OPTIONAL] Access token lifetime (default: 15m)
JWT_REFRESH_SECRET=                         # [REQUIRED] Min 64 chars, different from JWT_SECRET
JWT_REFRESH_EXPIRE=30d                      # [OPTIONAL] Refresh token lifetime (default: 30d)

# ── OAuth — Google ───────────────────────────────────────────────────────────
GOOGLE_CLIENT_ID=                           # [OPTIONAL] Google OAuth client ID
GOOGLE_CLIENT_SECRET=                       # [OPTIONAL] Google OAuth client secret
GOOGLE_CALLBACK_URL=https://api.yourdomain.com/api/auth/google/callback

# ── Payments — Stripe ────────────────────────────────────────────────────────
STRIPE_SECRET_KEY=sk_live_...               # [REQUIRED] Stripe live secret key
STRIPE_PUBLISHABLE_KEY=pk_live_...          # [REQUIRED] Stripe live publishable key
STRIPE_WEBHOOK_SECRET=whsec_...             # [REQUIRED] Stripe webhook signing secret

# ── Email / SMTP ─────────────────────────────────────────────────────────────
EMAIL_HOST=smtp.sendgrid.net                # [REQUIRED] SMTP host (SendGrid, SES, Gmail, etc.)
EMAIL_PORT=587                              # [OPTIONAL] SMTP port (587 for TLS, 465 for SSL)
EMAIL_USER=apikey                           # [REQUIRED] SMTP username (for SendGrid: "apikey")
EMAIL_PASS=SG.xxxxx                         # [REQUIRED] SMTP password / API key
EMAIL_FROM=noreply@yourdomain.com           # [OPTIONAL] Sender address

# ── AI / LLM (Chat Assistant) ───────────────────────────────────────────────
OPENAI_API_KEY=                             # [OPTIONAL] OpenAI API key for chat assistant
ANTHROPIC_API_KEY=                          # [OPTIONAL] Anthropic API key (alternative to OpenAI)

# ── Currency ─────────────────────────────────────────────────────────────────
CURRENCY_API_KEY=                           # [OPTIONAL] ExchangeRate API key for live rates
CURRENCY_API_URL=https://v6.exchangerate-api.com/v6

# ── File Storage — AWS S3 ───────────────────────────────────────────────────
AWS_ACCESS_KEY_ID=                          # [OPTIONAL] For product image uploads
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=comspace-uploads
AWS_REGION=us-east-1

# ── Monitoring — Sentry ─────────────────────────────────────────────────────
SENTRY_DSN=                                 # [OPTIONAL] Sentry DSN for error tracking

# ── CORS & URLs ──────────────────────────────────────────────────────────────
CORS_ORIGIN=https://yourdomain.com          # [REQUIRED] Comma-separated allowed origins
FRONTEND_URL=https://yourdomain.com         # [REQUIRED] Frontend URL for emails & redirects

# ── Rate Limiting ────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000                 # [OPTIONAL] 15 minutes (default)
RATE_LIMIT_MAX_REQUESTS=100                 # [OPTIONAL] Max requests per window

# ── Build Info (set by CI) ───────────────────────────────────────────────────
GIT_COMMIT=                                 # [AUTO] Set by CI/CD pipeline
